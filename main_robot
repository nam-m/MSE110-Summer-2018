#pragma config(Sensor, S1,     light,          sensorEV3_Color)
#pragma config(Motor,  motorA,          motorL,         tmotorEV3_Large, openLoop, encoder)
//*!!Code automatically generated by 'ROBOTC' configuration wizard               !!*//

task main()
{
	float n = -0.1; //speed modifier
	int i = 0; //iteration value
	int encoder = 0;
	int encoder_max = -450; //subject to change base on design

	datalogFlush();
	datalogClose();

	/*Data saving; 
	1st argument is INDEX number (data will be saved as 'datalog-<INDEX>.txt');
	2nd is number of columns in data file
	3rd is if you want to append data to existing file*/

	if (!datalogOpen(1, 2, false)){
		displayCenteredTextLine(4,"Unable to open datalog");
	}

	resetMotorEncoder(motorA);
	setMotorSpeed(motorA, 100*n);

	while (encoder > encoder_max){

		datalogAddShort(0, i);
		datalogAddShort(1, SensorValue[S1]);
		i++;

		encoder = getMotorEncoder(motorA);

		
		//The larger the sleep time = less samples
		
		sleep(20);
	}

	setMotorSpeed(motorA, 0);
	datalogClose();
}
